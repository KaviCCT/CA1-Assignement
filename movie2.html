<!DOCTYPE html>
<html lang="en">
<head><!-- Useful information about our website to assist in SEO and navigation -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="name" content="CCT College Movie House - Movie and Booking Details">
    <meta name="keywords" content="Omniplex Cinemas, Student Cinema, Cinema in Ireland, Cinema, Movies, Films, Big screen, 3D Movies, Book Tickets, Cinema Tickets, Cinema Times, Movies Times">
    <meta name="author" content="Kavi Patak sba22391">
    <!-- Icon and title visible in the browser tabs above our page -->
    <link rel="icon" href="Images/Popcornicon.png" type="image/x-icon">
    <title>Movie Overview</title>
    <!-- Linking our CSS3 stylesheet and bootstrap -->
    <link rel="stylesheet" href="CSS/movie2.css" type="text/css">
    <link rel="stylesheet" href="CSS/bootstrap.css">
</head>
<body >
    <!-- Imports for jquery library -->
    <script src="jQuery/jquery-3.2.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Movie section with id later used for displaying and hiding required sections i.e dynamic design -->
    <section id="movie-section">
        <!-- Bootstrap grid layout used throughout, containers and rows used for positioning, alligning and responsiveness -->
        <div class="container">
            <br>
            <h1> <img class="mainLogo" width="1078" height="150" src="Images/cooltext430441431364704.png"   alt="CCT MOVIE HOUSE">
                <img  class="mainLogo2" src="Images/cooltext430501367476887.png" alt="CCT MOVIE HOUSE"> 
            </h1>
            <hr class="hr">
            <h2> <img class="slogan" width="362" height="59" src="Images/cooltext430441489635834.png" alt="Watch and learn..."> </h2>
            <hr class="hr2">
            <br>
            <h3>Now Showing</h3>
            <div id="passNowShowingA" ></div><!-- Further use of id attribute for passing information through our javascript functions -->
            <div id="content" class="row">
                <!-- Bootstrap grid layout used throughout, containers and rows used for positioning, alligning and responsiveness -->
                <div class="col-md-6 col-sm-8 col-xs-12">
                    <img id="moviePosterSlide" src="Images/BladeRunner.jpg" alt="Movie poster">
                </div>
                <div>
                    <div class="col-md-6 col-sm-4 col-xs-12">
                        <!-- Actual descriptions stored within our movie description array and displayed based on page-->
                        <div id="descriptionSlide"></div>
                    </div>
                    <br><br>
                    <div class="col-md-6 col-sm-12 col-xs-12">
                        <p><!-- settings applied to our trailer inc. dimensions, autoplay and initially set to mute -->
                        <video id="trailerSlide" width="700" height="320" controls muted autoplay loop crossorigin="anonymous"  src="Images/BladeRunne(1982)-AModernTrailer.mp4"></video>
                        </p>
                    </div>
                </div>  
            </div>    
        </div>
    </section>
    <section id="booking-section"><!-- Booking section  with id attribute used to show andd hide accordinlgy, as requested through our functions -->
        <div class="container" id="booking">
            <br>
            <h3 class="h3hide">Book Tickets</h3>
            <fieldset>
                <legend id="bookTicketsHead">Book Tickets</legend> 
                <div class="row">
                    <div class="col-md-4 col-sm-4 col-xs-4">
                        <img class="smallLogo" src="Images/cooltext430501367476887.png" alt="CCT Movie House Logo" >
                    </div>
                    <br><br>
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <p>Submit your details below to complete your booking.</p>
                    </div>
                </div><!-- Bootstrap grid layout used throughout, containers and rows used for positioning, alligning and responsiveness -->
                <div class="col-md-4 col-sm-4 col-xs-4" >
                    <img id="bookingImage" width="883" height="881" src="Images/tickets.jpg" alt="Neon Tickets Image" >
                </div>
                <div class="row">
                    <div class="col-md-8 col-sm-8 col-xs-12">
                        <!-- Booking section with booking form in HTML, URI calling our PHP document, using POST to pass customer details via PHP language to our database where it is stored -->
                        <form id="bookingForm" action="PHP/booktickets.php" name="bookingForm" method="POST" >
                            <fieldset>
                                <div><!-- class assigned for CSS styling  -->
                                    <label class="formLabel">Movie</label>
                                    <div id="passNowShowingB" style="color:aqua;" ></div>
                                    <br>
                                </div>
                                <br><!-- Spam trap which is hidden from users, but not detectable by bots -->
                                <div id="spam" style="display: none;">
                                    <label for="spamTrap">Username</label><!-- Sfor attribute shows error on validator. -->
                                    <input type="text" name="spamTrap">
                                </div>
                                <div><!-- Details must correspond to input type, size, name in php form -->
                                    <label class="formLabel"  for="name">Name<span class="required">*</span></label><!-- Required field for certain mandatory inputs, Placeholder for example inputs, autofocus for CTA -->
                                    <input id="name" type="text" size="40" name="name"  placeholder="Full Name" autofocus  style="color: rgb(255, 255, 255);" required>
                                </div>
                                <br>
                                <div>
                                    <br><!-- HTML integrated datetime picker  -->
                                    <label class="formLabel" for="dateTime">Date <span class="required">*</span></label>
                                    <input id="dateTime" type="datetime-local" size="35"  min="2023-02-28T14:00" max="2023-04-30T24:00" name="dateTime"  style="color: rgb(255, 255, 255);" required>
                                    <br>
                                </div>
                                <br>
                                <div>
                                    <br><!-- HTML integrated email type  -->
                                    <label class="formLabel" for="email">Email <span class="required">*</span></label>
                                    <input id="email" type="email" value="" size="50" name="email" required placeholder="Email Address" style="color: rgb(255, 255, 255);">
                                    <br>
                                </div>
                                <br>
                                <div>
                                    <br><!-- HTML tel type for phone numbers  -->
                                    <label class="formLabel" for="phone">Phone</label>
                                    <input id="phone" type="tel" value="" size="15" name="phone" placeholder="Phone Number" style="color: rgb(255, 255, 255);" >
                                    <br>
                                </div>
                                <br>
                                <div class="col-md-4 col-sm-12 col-xs-12">
                                    <br><!-- onclick our confirm function with extra validation is called  -->
                                    <button id="submitbutton" onclick="confirm()" type="submit" class="submit">
                                    SUBMIT
                                    </button>
                                    <br>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </fieldset>
            <br><br><!-- Contact us section -->
            <section class="address-section">
                <h4 class="h4hide" style="text-align:left ;">Contact Us</h4>
                <fieldset>
                    <legend id="contactUs">Contact Us</legend>
                    <div class="col-md-4 col-sm-4 col-xs-12">      
                        <div class="address">
                            <address> <!-- Address tags implemented for SEO -->
                                CCT College Dublin,<br>
                                30 - 34 Westmoreland St., Dublin 2 <br>
                                Eircode: D02 HK35 <br>
                                Ireland <br>
                                <br>
                            </address>
                        </div>
                            <p><!-- Contact options available but hidden for securuty and spamming reasons -->
                                <a href="tel:+35316333444">Call us </a><br>
                                <a href="fax:+35316333446">Fax us </a><br>
                                <a href="mailto:info@cct.ie">Email us </a><br>
                            </p>
                    </div>
                </fieldset>
            </section>
        </div>
    </section>
    <Footer ><!-- Footer of our page with further navigation options. -->
        <nav class="footerNav">
            <div class="container"><!-- Bootstrap grid layout used throughout, containers and rows used for positioning, alligning and responsiveness -->
                <div id="bottonNav" class="row">
                    <div  class="col-md-3 col-sm-3 col-xs-3">
                        <!-- Buttons which call our javascript functions for further navigation and booking options. -->
                        <button name="listings" class="button-style" type="button" onclick="listings()">Listings</button>
                    </div>
                    <div  class="col-md-3 col-sm-3 col-xs-3">
                        <button name="previous" class="button-style" type="button" onclick="previous()">Previous</button>
                    </div>
                    <div  class="col-md-3 col-sm-3 col-xs-3">
                        <button name="next" class="button-style" type="button" onclick="next()">Next</button>
                    </div>
                    <div  class="col-md-3 col-sm-3 col-xs-3">
                        <button name="booktickets" class="button-styleT" type="button" onclick="booking()"> Tickets</button>
                        <br><br>
                    </div>
                </div>
            </div>
            <div id="linkNav" >
                <ul class="tabs">
                    <li class="tab"><a onclick="booking()" class="book-tickets" href="#">Book Tickets</a></li>
                    <li class="tab">&copy; Kavi Patak</li>
                    <li class="tab"><a  class="jump-to-top" href="#">Jump to Top</a></li>
                </ul>
            </div>
            <hr class="hr2">
            <hr class="hr">
            <div id="socialNav" >
                <ul class="socialtabs"><!-- Links to popular social media. -->
                    <li class="social-icon"><a href="https://www.facebook.com/" target="_blank"><img class="icon" src="Images/socialIconFB.jpg" alt="Facebook Icon" width="80" height="90" ></a></li>
                    <li class="social-icon"><a href="https://www.youtube.com/" target="_blank"><img class="icon" src="Images/socialIconYT.jpg" alt="Youtube Icon" width="80" height="90"></a></li>
                    <li class="social-icon"><a href="https://www.apple.com/" target="_blank"><img class="icon" src="Images/socialIconAp.jpg" alt="Apple Icon" width="80" height="90"></a></li>
                    <li class="social-icon"><a href="https://twitter.com/" target="_blank"><img class="icon" src="Images/socialIconTw.jpg" alt="Twitter Icon" width="80" height="90" ></a></li>
                </ul>
                <a href="index.html"><img class="small-logo" src="Images/cooltext430501367476887.png" alt="CCT Movie House Logo" title="Return to homepage."></a>
            </div>
        </nav>
    </Footer>
    <script>
        // Calling our Creating a cookie function
        $(document).ready(function(){
            createCookie('movie', movieName[choice], '10');
        });

        // Function for creating a cookie
        function createCookie(name, value, days){
            var expires;
            if(days){
                var date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expire s=" + date.toGMTString();
            }
            else{
                expires = "";
            }
            document.cookie = escape(name) + "=" + escape(value) + expires + "; path=/";
        }

        // Javascript code for selecting the appropriate movie to display
        // The last character; number is retrieved which coressponds to our movies within their array indexs
        var movieUrl = window.location.search;
        var lastChar = movieUrl.substr(movieUrl.length - 1);
        var choice = parseInt(lastChar);

        // Movie Poster Array
        const poster = new Array();
        poster[0] = "Images/BladeRunner.jpg";
        poster[1] = "Images/RoboCop.jpg";
        poster[2] = "Images/Terminator.jpg";
        poster[3] = "Images/Matrix.jpg";
        poster[4] = "Images/MinorityReport.jpg";
        poster[5] = "Images/iRobot.jpg";

        // Movie Name Array
        const movieName = new Array();
        movieName[0] = "Blade Runner";
        movieName[1] = "RoboCop";
        movieName[2] = "The Terminator";
        movieName[3] = "The Matrix";
        movieName[4] = "Minority Report";
        movieName[5] = "iRobot";

        // Movie Description Array
        const description = new Array();
        description[0] = "<b>R</b><br>1982 <br>1h 57m <br>Room 4 <br>20:00 hr<br><br>Rick Deckard, an ex-policeman, becomes a special agent with a mission to exterminate a group of violent androids. As he starts getting deeper into his mission, he questions his own identity.";
        description[1] = "<b>R</b><br>1987 <br>1h 52m <br>Hallroom <br>20:00 hr<br><br>In a dystopic and crime-infested Detroit, a terminally injured policeman returns to the force as a potent cyborg haunted by submerged memories.";
        description[2] = "<b>R</b><br>1984 <br>1h 57m <br>Cantene <br>20:00 hr<br><br>A cyborg assassin is sent back in time to kill Sarah, a waitress, in a bid to stop her son who will wage a long war against his enemy in the future unless the course of history is altered.";
        description[3] = "<b>R</b><br>1999 <br>2h 16m <br>Lecture Hall A <br>20:00 hr<br><br>Thomas Anderson, a computer programmer, is led to fight an underground war against powerful computers who have constructed his entire reality with a system called the Matrix.";
        description[4] = "<b>PG-13</b><br>2002 <br>2h 25m <br>Gymnasium <br>20:00 hr<br><br>A future technology makes it possible for cops to catch criminals before a crime is committed. John Anderton is accused of one such crime and sets out to prove his innocence.";
        description[5] = "<b>PG-13</b><br>2004 <br>1h 55m <br>Courtyard <br>20:00 hr<br><br>Del Spooner investigates the murder of Dr Alfred, who works at US Robotics, with the help of a robopsychologist. He tries to deduce if a robot has violated the laws of robotics and killed him.";

        // Movie Trailer Array
        const trailer = new Array();
        trailer[0] = "Images/Blade Runner (1982) - A Modern Trailer.mp4";
        trailer[1] = "Images/Robocop (1987) _ Official Trailer _ MGM Studios.mp4";
        trailer[2] = "Images/The Terminator (1984) - Trailer (HD).mp4";
        trailer[3] = "Images/Matrix Trailer HD (1999).mp4";
        trailer[4] = "Images/Minority Report - Official® Trailer 2 [HD].mp4";
        trailer[5] = "Images/I Robot Trailer (HD).mp4";

        // Function for manipulating and switching between which movie to display calling our sections by  id attributes 
        function swapImage(){
            var passA = document.getElementById("passNowShowingA");
            passA.innerHTML = movieName[choice];
            var passB = document.getElementById("passNowShowingB");
            passB.innerHTML = movieName[choice];
            var desSlide = document.getElementById("descriptionSlide");
            desSlide.innerHTML = description[choice];
            var posSlide = document.getElementById("moviePosterSlide");
            posSlide.src = poster[choice];
        }
        // Switching between trailers
        var url = trailer[choice]
        function changeSource (url){
            var video = document.getElementById("trailerSlide");
            video.src = url;
            video.play();
        }

        // Function called when Next button is clicked
        function next(){
            document.getElementById('content').style.display = 'block';
            document.getElementById('booking').style.display = 'none';
            if (choice < poster.length - 1)
            choice ++
            else choice =0    
            swapImage();
            var url = trailer[choice]
            changeSource(url)   
        }

        // The Previous button
        function previous(){
            document.getElementById('content').style.display = 'block';
            document.getElementById('booking').style.display = 'none';
            if (choice > 0)
                choice --
            else choice = poster.length - 1  
                swapImage();
                var url = trailer[choice]
                changeSource(url)   
        }
        
        // Function to return to and load Homepage
        function listings (){
            window.location.href = "index.html"
        }

        // Function for hiding Movie Overview content and displaying Booking section...accessed via id
        function booking(){
            document.getElementById('content').style.display = 'none';
            document.getElementById('booking').style.display = 'block';
            $(document).ready(function() {
                createCookie('movie', movieName[choice], '10');
            });
        }

        // function validationForm(){
        //     let nameVal = document.forms["bookingForm"]["name"].value;
        //     let emailVal = document.forms["bookingForm"]["email"].value;
        //     if(nameVal=="" || emailVal=="") {
        //         alert("Please input a valid name and email")
        //         return false;
        //     }
        // }

        // Function for confirming bookings by submit button
        // Further Validation implemented to avoid empty labels and invalid inputs
        function confirm(){
            let nameVal = document.forms["bookingForm"]["name"].value;
            let emailVal = document.forms["bookingForm"]["email"].value;
            // let phoneVal = document.forms["bookingForm"]["phone"].value;
            // (!/^[0-9]+$/.test(phoneVal))
            let isGood = true;
            if (nameVal=="" || emailVal=="" || (/^\S+@\S+\.\S+$/.test(emailVal))) {
                alert("Please input a valid name and email.")
                return false;
            }
            else 
            {
                var date = new Date($("#dateTime").val());
                var emailname = document.getElementById("email").value;
                alert (movieName[choice] + " tickets have been booked for " + date + " and sent to " + emailname)
                document.getElementById('booking').style.display = 'none';
                swapImage();
                var url = trailer[choice]
                changeSource(url);
            }
        }

        // // Function for confirming bookings by submit button
        // function confirm(){
        //     var date = new Date($("#dateTime").val());
        //     var emailname = document.getElementById("email").value;
        //     alert (movieName[choice] + " tickets have been booked for " + date + " and sent to " + emailname)
        //     document.getElementById('booking').style.display = 'none';
        //     swapImage();
        //     var url = trailer[choice]
        //     changeSource(url);
        // }

        // Alert function  onload of screen
        window.onload = function(){
            document.getElementById('booking').style.display = 'none';
            swapImage();
            changeSource(url);
        }

        // Prevent confirmation form resubmission dialog
        // ALternatively GET could be used nstead of POST
        if (window.history.replaceState){
            window.history.replaceState(null, null, window.location.href);
        }

    </script>
</body>
</html>